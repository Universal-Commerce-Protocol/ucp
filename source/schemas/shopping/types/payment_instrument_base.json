{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ucp.dev/schemas/shopping/types/payment_instrument_base.json",
  "title": "PaymentInstrumentBase",
  "description": "The base definition for any payment instrument. It links the instrument to a specific Merchant configuration (handler_id) and defines common fields like billing address.",
  "type": "object",
  "required": [
    "id",
    "handler_id",
    "type"
  ],
  "properties": {
    "id": {
      "type": "string",
      "description": "A unique identifier for this instrument instance, assigned by the Agent. Used to reference this specific instrument in the 'payment.selected_instrument_id' field."
    },
    "handler_id": {
      "type": "string",
      "description": "The ID of the payment handler configuration (from the 'Create Checkout' response) that was used to generate this instrument. This tells the Merchant which key/gateway to use for decryption."
    },
    "type": {
      "type": "string",
      "description": "The broad category of the instrument (e.g., 'card', 'tokenized_card', 'paypal'). specific schemas will constrain this to a constant value."
    },
    "billing_address": {
      "$ref": "postal_address.json",
      "description": "The billing address associated with this payment method."
    },
    "credential": {
      "type": "object",
      "description": "The secure payload required to process the transaction (e.g., payment token, cryptogram, or encrypted card data). The specific structure is defined by the child schema.",
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}